<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Store</title>

    <script>
        const apps = {
            "sora": {
                name: "Sora AI",
                id: "6448311069", /* Placeholder (Not released yet) */
                desc: "Create video from text. The official Sora app.",
                color: "linear-gradient(135deg, #000, #333)"
            },
            "chatgpt": {
                name: "ChatGPT",
                id: "6448311069", /* REAL ID */
                desc: "The official app by OpenAI. Chat about anything.",
                color: "linear-gradient(135deg, #74aa9c, #10a37f)"
            },
            "youtube": {
                name: "YouTube",
                id: "544007664", /* REAL ID */
                desc: "Watch, Stream, and Listen to your favorite creators.",
                color: "linear-gradient(135deg, #f00, #c00)"
            },
            "threads": {
                name: "Threads",
                id: "6446901002", /* REAL ID */
                desc: "Say more with Threads â€” Instagram's text-based app.",
                color: "linear-gradient(135deg, #000, #222)"
            },
            "instagram": {
                name: "Instagram",
                id: "389801252", /* REAL ID */
                desc: "Connect with friends, share photos and videos.",
                color: "linear-gradient(45deg, #f09433, #dc2743, #bc1888)"
            },
            "roblox": {
                name: "Roblox",
                id: "431946152", /* REAL ID */
                desc: "The ultimate virtual universe. Play with millions.",
                color: "linear-gradient(135deg, #333, #999)"
            },
            "pjsk": {
                name: "PJSK (TW)",
                id: "1568294309", /* REAL ID */
                desc: "Hatsune Miku: Colorful Stage! Rhythm game.",
                color: "linear-gradient(135deg, #33ccbb, #00aa99)"
            },
            "clash": {
                name: "Clash Royale",
                id: "1053012308", /* REAL ID */
                desc: "Real-time multiplayer battles starring the Royales.",
                color: "linear-gradient(135deg, #2d63d8, #5a91ff)"
            },
            "brawl": {
                name: "Brawl Stars",
                id: "1229016807", /* REAL ID */
                desc: "Fast-paced 3v3 battle royale made for mobile.",
                color: "linear-gradient(135deg, #ffc400, #ff9100)"
            }
        };

        // 2. ðŸŸ¢ BANNER INJECTOR (Run immediately)
        // Checks the URL for ?app=chatgpt and adds the meta tag
        const params = new URLSearchParams(window.location.search);
        const currentKey = params.get('app');

        if (currentKey && apps[currentKey]) {
            const myApp = apps[currentKey];
            // This line puts the banner in the browser header
            document.write('<meta name="apple-itunes-app" content="app-id=' + myApp.id + '">');
        }
    </script>

    <style>
        body {
            background-color: #f5f5f7;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
            margin: 0;
            padding: 20px;
            color: #1d1d1f;
        }

        /* GRID VIEW */
        #grid-view {
            max-width: 600px;
            margin: 0 auto;
        }

        h1 { text-align: center; margin-top: 20px; }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding-top: 20px;
        }

        .grid-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #000;
        }

        .icon-sq {
            width: 80px;
            height: 80px;
            border-radius: 18px;
            margin-bottom: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            background: #ccc; /* fallback */
        }

        .app-name { font-size: 12px; font-weight: 500; text-align: center; }

        /* DETAIL VIEW */
        #detail-view {
            display: none; /* Hidden unless an app is selected */
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
            padding-top: 40px;
        }

        .hero-icon {
            width: 120px;
            height: 120px;
            border-radius: 24px;
            margin: 0 auto 20px auto;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .desc {
            color: #86868b;
            font-size: 15px;
            line-height: 1.4;
            max-width: 300px;
            margin: 10px auto 30px auto;
        }

        .back-btn {
            background: #0071e3;
            color: white;
            padding: 10px 24px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
        }
    </style>
</head>
<body>

    <div id="grid-view">
        <h1>My Apps</h1>
        <div class="app-grid" id="grid-container">
            </div>
    </div>

    <div id="detail-view">
        <div id="d-icon" class="hero-icon"></div>
        <h1 id="d-title">App Name</h1>
        <p id="d-desc" class="desc">Description</p>
        
        <div style="background:#fff; padding:15px; border-radius:12px; margin-bottom:30px; font-size:13px; color:#555;">
            ðŸ‘† <strong>Check the top of Safari!</strong><br>
            The Native Smart Banner is active for this app.
        </div>

        <a href="index.html" class="back-btn" onclick="goHome(event)">Done</a>
    </div>

    <script>
        // 3. ðŸŸ¢ RENDER THE PAGE
        const gridContainer = document.getElementById('grid-container');
        const gridView = document.getElementById('grid-view');
        const detailView = document.getElementById('detail-view');

        // Logic: specific app selected?
        if (currentKey && apps[currentKey]) {
            // SHOW DETAIL PAGE
            const app = apps[currentKey];
            gridView.style.display = 'none';
            detailView.style.display = 'block';

            // Fill content
            document.getElementById('d-title').innerText = app.name;
            document.getElementById('d-desc').innerText = app.desc;
            document.getElementById('d-icon').style.background = app.color;

        } else {
            // SHOW GRID
            // Loop through the "apps" object to build the grid
            Object.keys(apps).forEach(key => {
                const app = apps[key];
                
                const link = document.createElement('a');
                link.className = 'grid-item';
                // Link reloads page with ?app=key (e.g., ?app=chatgpt)
                link.href = '?app=' + key; 
                
                link.innerHTML = `
                    <div class="icon-sq" style="background: ${app.color}"></div>
                    <div class="app-name">${app.name}</div>
                `;
                
                gridContainer.appendChild(link);
            });
        }

        function goHome(e) {
            e.preventDefault();
            window.location.href = window.location.pathname; // Clears the ?app=... param
        }
    </script>

</body>
</html>
