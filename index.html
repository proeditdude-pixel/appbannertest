<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Store Store</title>

    <script>
        const apps = {
            "sora":      { id: "6448311069", name: "Sora AI", color: "linear-gradient(135deg, #000, #333)" },
            "chatgpt":   { id: "6448311069", name: "ChatGPT", color: "linear-gradient(135deg, #74aa9c, #10a37f)" },
            "youtube":   { id: "544007664",  name: "YouTube", color: "linear-gradient(135deg, #f00, #c00)" },
            "threads":   { id: "6446901002", name: "Threads", color: "linear-gradient(135deg, #000, #222)" },
            "instagram": { id: "389801252",  name: "Instagram", color: "linear-gradient(45deg, #f09433, #bc1888)" },
            "roblox":    { id: "431946152",  name: "Roblox", color: "linear-gradient(135deg, #333, #999)" },
            "pjsk":      { id: "1568294309", name: "PJSK (TW)", color: "linear-gradient(135deg, #33ccbb, #00aa99)" },
            "clash":     { id: "1053012308", name: "Clash Royale", color: "linear-gradient(135deg, #2d63d8, #5a91ff)" },
            "brawl":     { id: "1229016807", name: "Brawl Stars", color: "linear-gradient(135deg, #ffc400, #ff9100)" }
        };

        const params = new URLSearchParams(window.location.search);
        const appKey = params.get('app');
        
        // Forces the meta tag to exist before the browser finishes rendering
        if (appKey && apps[appKey]) {
            document.write('<meta name="apple-itunes-app" content="app-id=' + apps[appKey].id + '">');
        }
    </script>

    <style>
        body { font-family: -apple-system, sans-serif; background: #f2f2f7; margin: 0; padding: 0; color: #000; }
        
        /* Grid Styles */
        #grid-view { padding: 40px 20px; max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 30px; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        .grid a { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: #000; }
        .icon { width: 75px; height: 75px; border-radius: 18px; margin-bottom: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .name { font-size: 12px; font-weight: 500; text-align: center; }

        /* Page Styles */
        #page-view { display: none; padding-top: 60px; text-align: center; min-height: 100vh; background: #fff; }
        .hero-icon { width: 100px; height: 100px; border-radius: 22px; margin: 0 auto 20px auto; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        .back-btn { display: inline-block; margin-top: 50px; padding: 10px 25px; background: #007aff; color: white; text-decoration: none; border-radius: 20px; font-weight: 600; }

        /* Debug Box */
        .debug-box {
            margin-top: 50px;
            padding: 15px;
            background: #eee;
            border-radius: 10px;
            font-family: monospace;
            font-size: 11px;
            color: #555;
            display: inline-block;
            text-align: left;
        }
    </style>
</head>
<body>

    <div id="grid-view">
        <h1>Apps</h1>
        <div class="grid" id="grid-container"></div>
    </div>

    <div id="page-view">
        <div id="p-icon" class="hero-icon"></div>
        <h1 id="p-title">Title</h1>
        <p>If the banner is missing, you have hidden it before.<br>Clear Safari Cache to reset.</p>
        
        <div class="debug-box">
            <strong>STATUS CHECK:</strong><br>
            <span id="debug-text">Waiting...</span>
        </div>

        <br>
        <a href="index.html" class="back-btn" onclick="goBack(event)">Back</a>
    </div>

    <script>
        const gridContainer = document.getElementById('grid-container');
        const gridView = document.getElementById('grid-view');
        const pageView = document.getElementById('page-view');
        const debugText = document.getElementById('debug-text');

        if (appKey && apps[appKey]) {
            // SHOW PAGE
            const app = apps[appKey];
            gridView.style.display = 'none';
            pageView.style.display = 'block';
            
            document.getElementById('p-title').innerText = app.name;
            document.getElementById('p-icon').style.background = app.color;
            
            // Show user that the code worked
            debugText.innerHTML = `Active App: ${app.name}<br>Injecting ID: ${app.id}<br>Status: Banner Request Sent`;
        } else {
            // SHOW GRID
            Object.keys(apps).forEach(key => {
                const app = apps[key];
                const link = document.createElement('a');
                link.href = '?app=' + key;
                link.innerHTML = `<div class="icon" style="background:${app.color}"></div><span class="name">${app.name}</span>`;
                gridContainer.appendChild(link);
            });
        }

        function goBack(e) {
            e.preventDefault();
            window.location.href = window.location.pathname;
        }
    </script>

</body>
</html>
